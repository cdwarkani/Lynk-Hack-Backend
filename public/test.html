<!DOCTYPE html>
<html>
<style>
    html,
    body {
        height: 100%;
        margin: 0;
        padding: 0;
    }

    .container-fluid,
    .row {
        height: 1000px
    }

    .board-container {
        padding: 40px;
        box-sizing: border-box
    }

    .board {
        background-color: #fff;
        height: 100%;
        padding: 40px;
    }
</style>


<style type="text/css">
    /* START of Reference Section CSS*/

    table {
        margin: 0 auto;
        width: 100%;
        clear: both;
        border-collapse: collapse;
        table-layout: fixed;
        word-wrap: break-word;
    }

    .jrnlRefHead {
        font-size: 26px;
        color: #134985;
        /*font-weight:bold;*/
        text-align: left;
        /*border-bottom:2pt solid #134985;*/
    }

    .jrnlRefSubHead {
        font-size: 24px !important;
        color: #134985 !important;
        text-align: left;
        font-weight: bold;
    }

    p {
        cursor: pointer;
    }

    p:hover {
        border-bottom: 1px solid;
        border-top: 1px solid;
    }

    .selectedRef {
        background-color: rgba(255, 218, 41, 0.23);
        border-bottom: 1px solid #FFD700;
        border-top: 1px solid #FFD700;
        cursor: pointer;
    }

    .jrnlRefText {
        color: red;
        font-size: 16px !important;
        font-weight: bolder !important;
        line-height: 175% !important;
        padding-left: 20px;
    }

    .jrnlRefText {
        color: black !important;
        font-size: 14px !important;
        font-weight: normal !important;
        line-height: 175% !important;
        padding-bottom: 5px;
    }

    .jrnlRefAnnotation,
    .jrnlRefAnnotation {
        color: #5757FF !important;
        font-size: 12px !important;
        line-height: 150% !important;
        padding: 0 20px 10px 20px;
    }

    .RefTextError,
    .RefTextError,
    .RefTextError {
        background-color: red;
        color: black !important;
    }

    /*
 .noPMID {
    border: 1pt solid red;
    paddding: 5px !important;
}
*/

    .book {
        color: #F5F5DC;
    }

    .conf-proc {
        color: #00FFFF;
    }

    .journal {
        color: #98FB98;
    }

    .other {
        color: #FFC0CB;
    }

    .patent {
        color: #87CEFA;
    }

    .web {
        color: #DDA0DD;
    }

    .RefArticleTitle,
    .RefArticleTitle,
    .RefArticleTitle {
        color: #F99500;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefAuthor,
    .RefAuthor,
    .RefAuthor {
        border: 1pt solid #285C5B !important;
        color: #388E8E;
        font-size: 14px !important;
        font-weight: normal !important;
        padding: 0 5px;
    }

    .RefAuthor,
    .RefAuthor {
        display: inline-block;
    }

    .RefBookTitle,
    .RefBookTitle,
    .RefBookTitle {
        border-bottom: 1pt solid #000000;
        color: #065658;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefTransTitle,
    .RefTransTitle,
    .RefTransTitle {
        border-top: 1pt solid #000000;
        border-bottom: 1pt solid #000000;
        color: #0A8E92;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefBookSeries,
    .RefBookSeries,
    .RefBookSeries {
        border-bottom: 1pt solid #0000FF;
        border-top: 1pt solid #0000FF;
        color: #FFD700;
        font-size: 14px !important;
    }

    .RefChapterTitle,
    .RefChapterTitle,
    .RefChapterTitle {
        color: #22AD73;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefCollaboration,
    .RefCollaboration,
    .RefCollaboration {
        color: #4682B4;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefComments,
    .RefComments,
    .RefComments {
        color: #FF00FF;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefInPress,
    .RefInPress,
    .RefInPress {
        color: #B00058;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefConfDate,
    .RefConfDate,
    .RefConfDate {
        color: #808080;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefConfLoc,
    .RefConfLoc,
    .RefConfLoc {
        color: #000080;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefConfName,
    .RefConfName,
    .RefConfName,
    .RefThesis,
    .RefThesis,
    .RefThesis {
        color: #800000;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefConfSponsor,
    .RefConfSponsor,
    .RefConfSponsor {
        color: #8B4513;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefConfTitle,
    .RefConfTitle,
    .RefConfTitle {
        color: #BDB76B;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefDay,
    .RefDay,
    .RefDay {
        color: #4B0082;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefDiss,
    .RefDiss,
    .RefDiss {
        color: #8A2BE2;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefDissLoc,
    .RefDissLoc,
    .RefDissLoc {
        color: #7CFC00;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefDissUniv,
    .RefDissUniv,
    .RefDissUniv {
        color: #3CB371;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefDOI,
    .RefDOI,
    .RefDOI,
    .RefAOP {
        color: #800080;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefDOI:before {
        content: ' doi: ';
    }

    .RefEdition,
    .RefEdition,
    .RefEdition {
        color: #008080;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefEditor,
    .RefEditor,
    .RefEditor {
        border: 1pt solid #510101 !important;
        color: #801C1C;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefComment,
    .RefComment,
    .RefComment {
        color: #636465;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefEtal,
    .RefEtal,
    .RefEtal {
        color: #D2691E;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefFPage,
    .RefFPage,
    .RefFPage {
        color: #FF6347;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefGivename,
    .RefGivenname,
    .RefGivenname,
    .RefGivenName,
    .RefGivenName {
        color: orange;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefISBN,
    .RefISBN,
    .RefISBN {
        color: #00FF00;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefIssue,
    .RefIssue,
    .RefIssue {
        color: rgba(211, 6, 210, 0.68);
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefJournalTitle,
    .RefJournalTitle,
    .RefJournalTitle {
        color: #808000;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefLAD,
    .RefLAD,
    .RefLAD {
        color: #556B2F;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefLPage,
    .RefLPage,
    .RefLPage {
        color: #008000;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefMonth,
    .RefMonth,
    .RefMonth {
        color: #2F4F4F;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefPublisherLoc,
    .RefPublisherLoc,
    .RefPublisherLoc {
        color: #CD853F;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefPublisherName,
    .RefPublisherName,
    .RefPublisherName {
        color: #FF1493;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefSlNo,
    .RefSlNo,
    .RefSlNo {
        color: #D55B6F;
        font-size: 14px !important;
        font-weight: normal !important;
        /*float: left;
    margin-left: -20px;*/
    }

    .RefSuffix,
    .RefSuffix,
    .RefSuffix {
        color: #8B5F65;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefSurname,
    .RefSurname,
    .RefSurname,
    .RefSurName,
    .RefSurName {
        color: #3852B0;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefVolume,
    .RefVolume,
    .RefVolume {
        color: #8B008B;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefWebSite,
    .RefWebSite,
    .RefWebSite {
        color: #0000FF;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefPatent,
    .RefPatent,
    .RefPatent {
        color: #CD326C;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefYear,
    .RefYear,
    .RefYear {
        color: #DC143C;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    .RefUrl,
    .RefUrl,
    .RefUrl {
        color: blue;
        font-size: 14px !important;
        font-weight: normal !important;
    }

    p {
        color: #FF0000;
        font-size: 14px;
        line-height: 250% !important;
        text-align: justify;
    }

    .RefArticleTitle,
    .RefAuthor,
    .RefBookTitle,
    .RefChapterTitle,
    .RefCollaboration,
    .RefComments,
    .RefConfDate,
    .RefConfLoc,
    .RefConfName,
    .RefConfSponsor,
    .RefConfTitle,
    .RefDay,
    .RefDiss,
    .RefDissLoc,
    .RefDissUniv,
    .RefDOI,
    .RefAOP,
    .RefEdition,
    .RefEditor,
    .RefEtal,
    .RefFPage,
    .RefGivenName,
    .RefISBN,
    .RefIssue,
    .RefJournalTitle,
    .RefLAD,
    .RefLPage,
    .RefMonth,
    .RefPublisherLoc,
    .RefPublisherName,
    .RefSlNo,
    .RefSuffix,
    .RefSurName,
    .RefVolume,
    .RefWebSite,
    .RefYear,
    .RefUrl {
        /*font-size: 12px !important;*/
    }

    /* END of Reference Section CSS*/
</style>

<style>
    td.details-control {
        background: url('https://drive.google.com/uc?id=1SN5WXMMl7pieG0eAUqmzpJUJXBG96fUA') no-repeat center center;
        cursor: pointer;
    }

    tr.shown td.details-control {
        background: url('https://drive.google.com/uc?id=1_Q-RzMR6xTw_-qPTKiaaduYuFnyK86h5') no-repeat center center;
    }
</style>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.css" rel="stylesheet" />
<!-- DataTables library file -->
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/1.3.1/css/buttons.dataTables.min.css">
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.15/css/jquery.dataTables.min.css">
<script src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.3.1/js/dataTables.buttons.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.3.1/js/buttons.flash.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.3.1/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.3.1/js/buttons.print.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>


<body>


    <div class="container-fluid">
        <div class="row board-container">
            <div style="text-align: center;font-size: 19px;margin-bottom: 43px;" class="board">
                <div style="margin-bottom : 23px">
                    Exeter Premedia Services - BIBLIO SEARCH, VALIDATE AND EXTRACT SERVICE.
                </div>
                <div class="col-xs-12" style="margin-top : 43px;margin-bottom : 43px">
                    <div class="col-xs-12">
                        <label for="usr">Select the style name:</label>

                        <div class="col-xs-12">
                            <select name="styleid" id="styleid" style="width:80%">
                                <option value="" disabled selected>Loading..</option>
                            </select>
                        </div>


                    </div>


                    <div class="col-xs-3 hidden">
                        <label for="usr">Enter Locale:</label>
                        <input type="text" class="form-control" id="localeid" value="locales-en-US.xml">
                    </div>
                    <div class="col-xs-3 hidden">
                        <label for="usr">Enter pre string:</label>
                        <input type="text" class="form-control" id="preid">
                    </div>
                    <div class="col-xs-3 hidden">
                        <label for="usr">Enter post string:</label>
                        <input type="text" class="form-control" id="postid">
                    </div>
                </div>
                <div style="margin-top: 43px" class="col-xs-12">
                    <b>Please select the type of service.</b>
                </div>
                <div class="col-xs-12">

                    <div class="col-xs-2" style="margin-top: 43px">
                        <!-- <button type="button" class="btn btn-default" onclick="openPmidBox()">Search by PMID</button>-->
                    </div>
                    <div class="col-xs-2" style="margin-top: 43px" onclick="openDoiBox()">
                        <!-- <button type="button" class="btn btn-default">Search by DOI</button> -->
                    </div>
                    <div class="col-xs-2" style="margin-top: 43px" onclick="openHtmlBox()">
                        <button type="button" class="btn btn-default">Validate through
                            <br> Tagged input</br>
                        </button>
                    </div>
                    <div class="col-xs-3" style="margin-top: 43px" onclick="openTBox()">
                        <button type="button" class="btn btn-default">Validate through
                            <br>Reference.</br>
                        </button>
                    </div>
                    <div class="col-xs-3" style="margin-top: 43px" onclick="openEBox()">
                        <!-- <button type="button" class="btn btn-default">Extract references from <br>Docx file.</br></button> -->
                    </div>
                </div>

                <div class="col-xs-12" style="margin-top: 43px; padding: 40px;margin-bottom: 43px;display:none" id="pmidbox">
                    <div class="col-xs-12" style="font-size: 20px">
                        <b>
                            <font color="green">PMID SEARCH</font>
                        </b>
                    </div>
                    <form class="form-horizontal" id="forrm" style="margin-top :50px">
                        <!--
  <div class="form-group">
    <label class="control-label col-sm-2" for="email">Enter Endpoint:</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" id="pmidep" value="/"  >
    </div>
  </div>
   <div class="form-group">
    <label class="control-label col-sm-2" for="pwd" style="font-size:15px">Enter Input Biblio String:</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" id="pmidbiblio" placeholder="Enter PMID EX:1121211" value="[Default Input String]">
    </div>

  </div>
-->
                        <div class="form-group">
                            <label class="control-label col-sm-4" for="pwd">ENTER PMID/ PMCID</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="pmiddata" placeholder="Enter PMID EX:1121211" value="2396716">
                            </div>
                            <!--
     <div class="col-sm-10" style="margin-top: 10px">
      or
    </div>
-->
                        </div>
                        <!--
   <div class="form-group">
    <label class="control-label col-sm-2" for="pwd">Choose File:</label>
    <div class="col-sm-10">
<input type="file" name="filespmid" style="font-size: 15px;padding:10px; " id="filespmid" accept=".txt">

    </div>
  </div>
-->

                        <div class="form-group">

                        </div>
                        <div class="form-group">

                        </div>
                        <div class="form-group">
                            <div class=" col-sm-12">
                                <button type="button" class="btn btn-success" style="width :400px;text-align: center" onclick="GenerateOutput('pmid');">Submit</button>
                            </div>
                        </div>
                    </form>
                </div>

                <div class="col-xs-12" style="margin-top: 43px; padding: 40px;margin-bottom: 43px;display:none" id="doibox">
                    <div class="col-xs-12" style="font-size: 20px">
                        <b>
                            <font color="green">DOI SEARCH</font>
                        </b>
                    </div>
                    <form class="form-horizontal" style="margin-top :50px">
                        <!--
  <div class="form-group">
    <label class="control-label col-sm-2" for="email">Enter Endpoint:</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" id="doiep" value="/" >
    </div>
  </div>
   <div class="form-group">
    <label class="control-label col-sm-2" for="pwd" style="font-size:15px">Enter Input Biblio String:</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" id="doibiblio" placeholder="Enter inputstring" value="[Default Input String]">
    </div>

  </div>
-->
                        <div class="form-group">
                            <label class="control-label col-sm-4" for="pwd">ENTER DOI:</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="doidata" placeholder="Enter password" value="10.1126/science.169.3946.635">
                            </div>
                            <!--
  <div class="col-sm-10" style="margin-top: 10px">
      or
    </div>
  -->
                        </div>
                        <!--
   <div class="form-group">
    <label class="control-label col-sm-2" for="pwd">Choose File:</label>
    <div class="col-sm-10">
<input type="file" name="filesdoi" style="font-size: 15px;padding:10px; " id="filesdoi" accept=".txt">

    </div>
  </div>
-->

                        <div class="form-group">

                        </div>
                        <div class="form-group">

                        </div>
                        <div class="form-group">

                        </div>
                        <div class="form-group">
                            <div class=" col-sm-12">
                                <button type="button" class="btn btn-success" style="width :400px;text-align: center" onclick="GenerateOutput('doi');">Submit</button>
                            </div>
                        </div>
                    </form>
                </div>

                <div class="col-xs-12" style="margin-top: 43px; padding: 40px;margin-bottom: 43px;display:none" id="htmlbox">
                    <div class="col-xs-12" style="font-size: 20px">
                        <b>
                            <font color="green" style="margin-left:150px">TAGGED INPUT SEARCH </font>
                        </b>
                        <button style="float:right;font-size: 15px" onclick="setsamplehtmlinput();" id="sampleInput">USE SAMPLE INPUT</button>
                    </div>

                    <form class="form-horizontal" style="margin-top :50px">
                        <!--
  <div class="form-group">
    <label class="control-label col-sm-2" for="email">Enter Endpoint:</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" id="htmlep" value="/" >
    </div>
  </div>
   <div class="form-group">
    <label class="control-label col-sm-2" for="pwd" style="font-size:15px">Enter Input Biblio String:</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" id="htmlbiblio" placeholder="Enter PMID EX:1121211" value="[Default Input String]">
    </div>

  </div>
-->
                        <div class="form-group">
                            <!--
    <div class="col-xs-12" style="margin-bottom: 30px">
    <label class="control-label col-sm-2" style="font-size: 15px " for="pwd">Select Type:</label>
        <div class="col-sm-10">

                        <select id="journalInfo" style="width: 100%">
                        <option selected="selected" value="article-journal">Journal</option>
                        <option value="book">Book</option>
                        <option value="book">Book_editor</option>
                        <option value="thesis">Thesis</option>
                        <option value="dataset">Data</option>
                        <option value="paper-conference">Conference</option>
                        <option value="entry">Software</option>
                        <option value="patent">Patent</option>
                        <option value="webpage">Website</option>
                        <option value="article-journal">Periodical</option>
                        <option value="article-journal">Preprint</option>
                        <option value="article-journal">Clinical Trial</option>
                        <option value="report">Report</option>
                        </select>
                     </div>
  </div>
-->
                            <div class="col-xs-12">
                                <div class="col-sm-12">
                                    <textarea style="border-style: dashed;text-align: center;border-width: thick;" type="text" rows="7" class="form-control"
                                        id="htmldata" placeholder="ENTER TAGGED HTML INPUT" value="&lt;p class=&quot;jrnlRefText&quot; id=&quot;R1&quot; data-id=&quot;R1&quot; data-styled=&quot;RefText&quot; data-class-name=&quot;RefText&quot; data-reftype=&quot;journal&quot; data-valid-id=&quot;R1&quot; data-pmid=&quot;http://www.ncbi.nlm.nih.gov/pubmed/20943636&quot; data-doi=&quot;10.1093/annonc/mdq276&quot; data-validated=&quot;true&quot; data-editable=&quot;false&quot;&gt; &lt;span class=&quot;RefSlNo&quot; id=&quot;ddd716da-d6da-4224-8ef5-c36c9f238cbe&quot;&gt;1.&lt;/span&gt; &lt;span class=&quot;RefAuthor&quot; id=&quot;17c59be7-dd2b-4e5e-bc17-8a3ad98e44a1&quot;&gt; &lt;span class=&quot;RefSurName&quot; id=&quot;ce432a0e-b3c8-48be-a708-bde2201b680b&quot;&gt;Ritter&lt;/span&gt; &lt;span class=&quot;RefGivenName&quot; id=&quot;306620b3-8093-4fe8-a91b-8f80f206ff02&quot;&gt;J&lt;/span&gt; &lt;/span&gt; , &lt;span class=&quot;RefAuthor&quot; id=&quot;a0075c54-8b97-45b7-911c-d6152dae3fec&quot;&gt; &lt;span class=&quot;RefSurName&quot; id=&quot;b9e19d00-fcca-44bc-937f-4e5ae25467b3&quot;&gt;Bielack&lt;/span&gt; &lt;span class=&quot;RefGivenName&quot; id=&quot;5c5e3ccb-d050-4cc1-933f-59324a2ea38b&quot;&gt;SS&lt;/span&gt; &lt;/span&gt; . &lt;span class=&quot;RefArticleTitle&quot; id=&quot;8ca0ef94-5f26-47b0-92ef-f8586cfb11c2&quot;&gt;Osteosarcoma&lt;/span&gt; . &lt;span class=&quot;RefJournalTitle&quot; id=&quot;76e4bae2-b1bd-49ba-87c8-f092211a990a&quot;&gt; &lt;em id=&quot;1b026af4-82e1-42c3-8b0e-f839cb1cf1ea&quot;&gt;Ann Oncol&lt;/em&gt; &lt;/span&gt; . &lt;span class=&quot;RefYear&quot; id=&quot;6125cdf8-4d5a-4cb3-80c1-502d04d65ead&quot;&gt;2010&lt;/span&gt; ; &lt;span class=&quot;RefVolume&quot; id=&quot;7471793b-de7b-46b1-ad79-1f236b3ea11c&quot;&gt;21 Suppl 7&lt;/span&gt; ( &lt;span class=&quot;RefIssue&quot; id=&quot;88a5846d-0bca-45df-a210-af69ebe3ed3c&quot;&gt;Suppl 7&lt;/span&gt; ): &lt;span class=&quot;RefFPage&quot; id=&quot;085a3db5-feee-4edf-8aa8-625ce8e942d7&quot;&gt;vii320&lt;/span&gt; &ndash; &lt;span class=&quot;RefLPage&quot; id=&quot;5a4f7b19-c0ef-4856-b112-fd8edd5e69ad&quot;&gt;vii325&lt;/span&gt; . &lt;/p&gt;"></textarea>
                                </div>
                            </div>
                            <!--
     <div class="col-sm-10" style="margin-top: 10px">
      or
    </div>
  -->
                        </div>
                        <!--

   <div class="form-group">
    <label class="control-label col-sm-2" for="pwd">Choose File:</label>
    <div class="col-sm-10">
<input type="file" name="file" style="font-size: 15px;padding:10px; " id="files" accept=".txt">

    </div>
  </div>
-->

                        <div class="form-group">

                        </div>
                        <div class="form-group">
                            <div class=" col-sm-12">
                                <button type="button" class="btn btn-success" style="width :400px;text-align: center" onclick="GenerateOutput('html')">Submit</button>
                            </div>
                        </div>
                    </form>
                </div>

                <div class="col-xs-12" style="margin-top: 43px; padding: 40px;margin-bottom: 43px;display:none;border: thin solid rgb(0, 0, 0);"
                    id="referencebox">
                    <script>





                        function handleSingle() {
                            document.getElementById("referenceBoxInput").style.display = "block";
                            document.getElementById("referenceBoxInputFile").style.display = "none";
                            document.getElementById("sampleInputbut").style.visibility = 'visible';
                            document.getElementById("htmldataFile").style.display = "none";
                            document.getElementById("htmldataFiletext").style.display = "none";

                        }
                        function handleFileMode() {
                            document.getElementById("referenceBoxInput").style.display = "none";
                            document.getElementById("sampleInputbut").style.visibility = 'hidden';

                            document.getElementById("referenceBoxInputFile").style.display = "block";
                            document.getElementById("htmldataFile").style.display = "none";
                            document.getElementById("htmldataFiletext").style.display = "none";
                            document.getElementById("fileInputsinfo").value = "";
                        }
                    </script>
                    <div class="col-xs-12" style="margin-bottom: 50px">
                        <div class="col-xs-6">
                            <input type="radio" name="colors" id="singleMode" onchange="handleSingle();" checked> &nbsp;&nbsp;&nbsp; Run using visual interface mode
                            <br>
                        </div>
                        <div class="col-xs-6 ">
                            <input type="radio" name="colors" id="FileMode" onchange="handleFileMode();"> &nbsp;&nbsp;&nbsp; Run using file mode
                        </div>
                    </div>
                    <div class="col-xs-12" style="font-size: 20px">
                        <b>
                            <font color="green" style="margin-left:150px">REFERENCE INPUT SEARCH </font>
                        </b>
                        <button style="float:right;font-size: 15px" onclick="setsamplerefinput();" id="sampleInputbut">USE SAMPLE INPUT</button>
                    </div>

                    <form class="form-horizontal" style="margin-top :100px">
                        <div class="form-group">
                            <div class="col-xs-12">
                                <div class="col-sm-12" id="referenceBoxInput" style="margin-top: 50px ">
                                    <textarea style="border-style: dashed;text-align: center;border-width: thick;" type="text" rows="7" class="form-control"
                                        id="refdata" placeholder="ENTER REFERENCE INPUT" value="&lt;p class=&quot;jrnlRefText&quot; id=&quot;R1&quot; data-id=&quot;R1&quot; data-styled=&quot;RefText&quot; data-class-name=&quot;RefText&quot; data-reftype=&quot;journal&quot; data-valid-id=&quot;R1&quot; data-pmid=&quot;http://www.ncbi.nlm.nih.gov/pubmed/20943636&quot; data-doi=&quot;10.1093/annonc/mdq276&quot; data-validated=&quot;true&quot; data-editable=&quot;false&quot;&gt; &lt;span class=&quot;RefSlNo&quot; id=&quot;ddd716da-d6da-4224-8ef5-c36c9f238cbe&quot;&gt;1.&lt;/span&gt; &lt;span class=&quot;RefAuthor&quot; id=&quot;17c59be7-dd2b-4e5e-bc17-8a3ad98e44a1&quot;&gt; &lt;span class=&quot;RefSurName&quot; id=&quot;ce432a0e-b3c8-48be-a708-bde2201b680b&quot;&gt;Ritter&lt;/span&gt; &lt;span class=&quot;RefGivenName&quot; id=&quot;306620b3-8093-4fe8-a91b-8f80f206ff02&quot;&gt;J&lt;/span&gt; &lt;/span&gt; , &lt;span class=&quot;RefAuthor&quot; id=&quot;a0075c54-8b97-45b7-911c-d6152dae3fec&quot;&gt; &lt;span class=&quot;RefSurName&quot; id=&quot;b9e19d00-fcca-44bc-937f-4e5ae25467b3&quot;&gt;Bielack&lt;/span&gt; &lt;span class=&quot;RefGivenName&quot; id=&quot;5c5e3ccb-d050-4cc1-933f-59324a2ea38b&quot;&gt;SS&lt;/span&gt; &lt;/span&gt; . &lt;span class=&quot;RefArticleTitle&quot; id=&quot;8ca0ef94-5f26-47b0-92ef-f8586cfb11c2&quot;&gt;Osteosarcoma&lt;/span&gt; . &lt;span class=&quot;RefJournalTitle&quot; id=&quot;76e4bae2-b1bd-49ba-87c8-f092211a990a&quot;&gt; &lt;em id=&quot;1b026af4-82e1-42c3-8b0e-f839cb1cf1ea&quot;&gt;Ann Oncol&lt;/em&gt; &lt;/span&gt; . &lt;span class=&quot;RefYear&quot; id=&quot;6125cdf8-4d5a-4cb3-80c1-502d04d65ead&quot;&gt;2010&lt;/span&gt; ; &lt;span class=&quot;RefVolume&quot; id=&quot;7471793b-de7b-46b1-ad79-1f236b3ea11c&quot;&gt;21 Suppl 7&lt;/span&gt; ( &lt;span class=&quot;RefIssue&quot; id=&quot;88a5846d-0bca-45df-a210-af69ebe3ed3c&quot;&gt;Suppl 7&lt;/span&gt; ): &lt;span class=&quot;RefFPage&quot; id=&quot;085a3db5-feee-4edf-8aa8-625ce8e942d7&quot;&gt;vii320&lt;/span&gt; &ndash; &lt;span class=&quot;RefLPage&quot; id=&quot;5a4f7b19-c0ef-4856-b112-fd8edd5e69ad&quot;&gt;vii325&lt;/span&gt; . &lt;/p&gt;"></textarea>
                                </div>
                                <div class="col-sm-12" id="referenceBoxInputFile" style="margin-top: 50px ">
                                    <input type='file' accept='text/plain' id="fileInputsinfo" onchange='openFile(event)' />
                                    <textarea style="border-style: dashed;text-align: center;border-width: thick;" type="text" rows="7" class="form-control"
                                        id="htmldataFile" placeholder="ENTER TAGGED HTML INPUT"></textarea>
                                    <textarea style="border-style: dashed;text-align: center;border-width: thick;" type="text" rows="1" class="form-control"
                                        id="htmldataFiletext" placeholder="ENTER TAGGED HTML INPUT"></textarea>

                                    <script>
                                        var openFile = function (event) {
                                            var input = event.target;
                                            var reader = new FileReader();
                                            reader.onload = function () {
                                                var text = reader.result;
                                                var node = document.getElementById('output');
                                                document.getElementById("htmldataFile").style.display = "block";
                                                document.getElementById("htmldataFiletext").style.display = "block";
                                                document.getElementById("htmldataFile").value = text;

                                                var lines = text.split(/\n/);
                                                var output = [];
                                                var outputText = [];
                                                var sOutput = "[";
                                                for (var i = 0; i < lines.length; i++) {
                                                    // only push this line if it contains a non whitespace character.
                                                    if (/\S/.test(lines[i])) {
                                                        outputText.push('"' + $.trim(lines[i]) + '"');
                                                        output.push($.trim(lines[i]));
                                                        sOutput += "{" + lines[i] + "},";
                                                    }
                                                }
                                                sOutput = sOutput.substr(0, sOutput.length - 1);
                                                sOutput += "]";
                                                document.getElementById("htmldataFile").value = sOutput;
                                                document.getElementById("htmldataFiletext").value = "Loaded " + output.length + " references.";
                                            };

                                            reader.readAsText(input.files[0]);
                                        };
                                    </script>
                                </div>
                            </div>
                            <div class="form-group">

                            </div>
                            <div class="form-group">
                                <div class=" col-sm-12">
                                    <button type="button" class="btn btn-success" style="width :400px;text-align: center" onclick="GenerateOutput('reference')">Submit</button>
                                </div>
                            </div>
                    </form>
                    </div>



                    <div class="col-xs-12" style="margin-top: 43px; padding: 40px;margin-bottom: 43px;display:none" id="extractbox">
                        <div class="col-xs-12" style="font-size: 20px">
                            <b>
                                <font color="green"> EXTRACT SEARCH</font>
                            </b>
                        </div>
                        <form class="form-horizontal" style="margin-top :50px">
                            <div class="form-group">
                                <label class="control-label col-sm-2" for="pwd">Enter FilePathLocation:</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control" id="extractdata" placeholder="Enter password" value="/Users/apple/BiblioServiceRefactored/_tests/ExtractedFiles/zoterofile.docx">
                                </div>
                                <div class="col-xs-10" style="margin-top: 30px ;text-align: left;font-size: 14px">[ Accepts Zotero, Mendeley, CSL Citation, Papers, RefMGR, EndNote ]</div>
                            </div>
                            <div class="form-group">

                            </div>
                            <div class="form-group">
                                <div class=" col-sm-12">
                                    <button type="button" class="btn btn-success" style="width :400px;text-align: center" onclick="GenerateOutput('extract')">Submit</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-xs-12" style="margin-top: 43px; padding: 40px;margin-bottom: 43px;" id="pmidbox">

                <form class="form-horizontal" style="margin-top :50px">
                    <div class="form-group">

                        <div class="col-xs-12">

                            <div class="col-xs-12" style="margin-top: 43px; ;margin-bottom: 43px;;padding-bottom: 30px;" id="dataatab">
                                <div class="col-xs-12" style="font-size: 20px;padding: 20px">
                                    <b>OUTPUT</b>
                                </div>


                            </div>
                            <div class="col-xs-12" style="margin-top: 43px; ;margin-bottom: 43px;;padding-bottom: 30px;" id="dataatabpmidanddoi">
                                <div class="col-xs-12" style="font-size: 20px;padding: 20px">
                                    <b>OUTPUT</b>
                                </div>


                                <div class="container-fluid" style="margin-bottom: 40px;">
                                    <div class="col-xs-12" id="finalOutputDatas" style="border-color: black;border :solid 1px;padding: 10px; ">

                                    </div>

                                </div>


                            </div>



                            <div class="col-xs-12" style="margin-top: 43px; ;margin-bottom: 43px;padding-bottom: 30px;" id="dataatabExtract">
                                <div class="col-xs-12" style="font-size: 20px;padding: 20px">
                                    <b>OUTPUT</b>
                                </div>


                                <div class="container-fluid" style="margin-bottom: 40px;" id="">
                                    <div class="col-xs-12" style="border-color: ;border :solid 1px;padding: 10px; ">

                                        <table id="user_data2" class="display" width="100%" cellspacing="0">
                                            <thead style="font-size: 20px;">
                                                <tr style="font-size: 20px;">

                                                    <th style="font-size: 17px; width: 14%">converted JSON</th>
                                                    <th style="font-size: 17px;width: 14%">Citation Data</th>
                                                    <th style="font-size: 17px;width: 14%">Generated BiblioGraphy String</th>
                                                </tr>
                                            </thead>
                                            <tbody></tbody>
                                        </table>


                                    </div>

                                </div>


                            </div>
                        </div>
                </form>
                </div>
            </div>



            <!-- Trigger the modal with a button -->

            <!-- Modal -->
            <div id="myModal" class="modal fade" role="dialog" style="text-align: center;width: 100%;height: 100%">
                <div class="modal-dialog" style="text-align: center;width: 100%;height: 100%">

                    <!-- Modal content-->
                    <div class="modal-content" style="text-align: center;width: 100%;height: 100%;opacity: 0.9">

                        <div class="modal-body" style="text-align: center;">
                            <div class="lds-css ng-scope">
                                <div class="lds-spinner" style="height: 50px;width: 50px;opacity: 1;margin-left: 40%;margin-top: 10%">
                                    <div></div>
                                    <div></div>
                                    <div></div>
                                    <div></div>
                                    <div></div>
                                    <div></div>
                                    <div></div>
                                    <div></div>
                                    <div></div>
                                    <div></div>
                                    <div></div>
                                    <div></div>
                                </div>
                                <div class="col-xs-12">
                                    <font color="green">Please, wait. Fetching data from the source..</font>
                                </div>
                                <style type="text/css">
                                    @keyframes lds-spinner {
                                        0% {
                                            opacity: 1;
                                        }
                                        100% {
                                            opacity: 0;
                                        }
                                    }

                                    @-webkit-keyframes lds-spinner {
                                        0% {
                                            opacity: 1;
                                        }
                                        100% {
                                            opacity: 0;
                                        }
                                    }

                                    .lds-spinner {
                                        position: relative;
                                    }

                                    .lds-spinner div {
                                        left: 94px;
                                        top: 48px;
                                        position: absolute;
                                        -webkit-animation: lds-spinner linear 1s infinite;
                                        animation: lds-spinner linear 1s infinite;
                                        background: #4ae222;
                                        width: 12px;
                                        height: 24px;
                                        border-radius: 40%;
                                        -webkit-transform-origin: 6px 52px;
                                        transform-origin: 6px 52px;
                                    }

                                    .lds-spinner div:nth-child(1) {
                                        -webkit-transform: rotate(0deg);
                                        transform: rotate(0deg);
                                        -webkit-animation-delay: -0.916666666666667s;
                                        animation-delay: -0.916666666666667s;
                                    }

                                    .lds-spinner div:nth-child(2) {
                                        -webkit-transform: rotate(30deg);
                                        transform: rotate(30deg);
                                        -webkit-animation-delay: -0.833333333333333s;
                                        animation-delay: -0.833333333333333s;
                                    }

                                    .lds-spinner div:nth-child(3) {
                                        -webkit-transform: rotate(60deg);
                                        transform: rotate(60deg);
                                        -webkit-animation-delay: -0.75s;
                                        animation-delay: -0.75s;
                                    }

                                    .lds-spinner div:nth-child(4) {
                                        -webkit-transform: rotate(90deg);
                                        transform: rotate(90deg);
                                        -webkit-animation-delay: -0.666666666666667s;
                                        animation-delay: -0.666666666666667s;
                                    }

                                    .lds-spinner div:nth-child(5) {
                                        -webkit-transform: rotate(120deg);
                                        transform: rotate(120deg);
                                        -webkit-animation-delay: -0.583333333333333s;
                                        animation-delay: -0.583333333333333s;
                                    }

                                    .lds-spinner div:nth-child(6) {
                                        -webkit-transform: rotate(150deg);
                                        transform: rotate(150deg);
                                        -webkit-animation-delay: -0.5s;
                                        animation-delay: -0.5s;
                                    }

                                    .lds-spinner div:nth-child(7) {
                                        -webkit-transform: rotate(180deg);
                                        transform: rotate(180deg);
                                        -webkit-animation-delay: -0.416666666666667s;
                                        animation-delay: -0.416666666666667s;
                                    }

                                    .lds-spinner div:nth-child(8) {
                                        -webkit-transform: rotate(210deg);
                                        transform: rotate(210deg);
                                        -webkit-animation-delay: -0.333333333333333s;
                                        animation-delay: -0.333333333333333s;
                                    }

                                    .lds-spinner div:nth-child(9) {
                                        -webkit-transform: rotate(240deg);
                                        transform: rotate(240deg);
                                        -webkit-animation-delay: -0.25s;
                                        animation-delay: -0.25s;
                                    }

                                    .lds-spinner div:nth-child(10) {
                                        -webkit-transform: rotate(270deg);
                                        transform: rotate(270deg);
                                        -webkit-animation-delay: -0.166666666666667s;
                                        animation-delay: -0.166666666666667s;
                                    }

                                    .lds-spinner div:nth-child(11) {
                                        -webkit-transform: rotate(300deg);
                                        transform: rotate(300deg);
                                        -webkit-animation-delay: -0.083333333333333s;
                                        animation-delay: -0.083333333333333s;
                                    }

                                    .lds-spinner div:nth-child(12) {
                                        -webkit-transform: rotate(330deg);
                                        transform: rotate(330deg);
                                        -webkit-animation-delay: 0s;
                                        animation-delay: 0s;
                                    }

                                    .lds-spinner {
                                        width: 200px !important;
                                        height: 200px !important;
                                        -webkit-transform: translate(-100px, -100px) scale(1) translate(100px, 100px);
                                        transform: translate(-100px, -100px) scale(1) translate(100px, 100px);
                                    }
                                </style>
                            </div>
                        </div>

                    </div>

                </div>
            </div>

            <script>

                document.getElementById("pmidbox").style.border = "thin solid #000";
                document.getElementById("doibox").style.border = "thin solid #000";
                document.getElementById("htmlbox").style.border = "thin solid #000";
                document.getElementById("extractbox").style.border = "thin solid #000";
                function setsamplehtmlinput() {
                toastr.options = {
                    "closeButton": true,
                    "timeOut": "2000",

                }
                    toastr.success('Sample input applied.', 'SUCCESS');
                    document.getElementById("htmldata").value = "<p class=\"jrnlRefText\" class-name=\"RefText\" seqid=\"R1\" id=\"R1\" data-id=\"R1\" data-styled=\"RefText\" data-class-name=\"RefText\" data-reftype=\"Journal\"><span class=\"RefSlNo\">1</span>. <span class=\"RefAuthor\"><span class=\"RefSurName\">Emamikia</span><span class=\"RefGivenName\">S</span></span>, <span class=\"RefAuthor\"><span class=\"RefSurName\">Gentline</span><span class=\"RefGivenName\">C</span></span>, <span class=\"RefAuthor\"><span class=\"RefSurName\">Chatzidionysiou</span><span class=\"RefGivenName\">K</span></span>, <span class=\"RefEtal\">et al</span>. <span class=\"RefArticleTitle\">Relationship between glucocorticoid dose and adverse events in systemic lupus erythematosus: Data from a randomized clinical trial [J]</span>. <span class=\"RefJournalTitle\">Scandinavian journal of rheumatology</span>, <span class=\"RefYear\">2018</span>,<span class=\"RefVolume\">47</span>(<span class=\"RefIssue\">2</span>):<span class=\"RefFPage\">131</span>-<span class=\"RefLPage\">140</span>.</p><p class=\"jrnlRefText\" class-name=\"RefText\" seqid=\"R2\" id=\"R2\" data-id=\"R2\" data-styled=\"RefText\" data-class-name=\"RefText\" data-reftype=\"Journal\"><span class=\"RefSlNo\">2</span>. <span class=\"RefAuthor\"><span class=\"RefSurName\">Liu</span><span class=\"RefGivenName\">Y</span></span>, <span class=\"RefAuthor\"><span class=\"RefSurName\">Cui</span><span class=\"RefGivenName\">Y</span></span>, <span class=\"RefAuthor\"><span class=\"RefSurName\">Zhang</span><span class=\"RefGivenName\">X</span></span>, <span class=\"RefEtal\">et al</span>. <span class=\"RefJournalTitle\">Effects of salvianolate on bone metabolism in glucocorticoid-treated lupus-prone b6.Mrl-fas (lpr) /j mice [J]. Drug design, development and therapy</span>, <span class=\"RefYear\">2016</span>,<span class=\"RefVolume\">10</span>(<span class=\"RefFPage\">2535</span>-<span class=\"RefLPage\">2546</span>.</p><p class=\"jrnlRefText\" class-name=\"RefText\" seqid=\"R3\" id=\"R3\" data-id=\"R3\" data-styled=\"RefText\" data-class-name=\"RefText\" data-reftype=\"Journal\"><span class=\"RefSlNo\">3</span>. <span class=\"RefAuthor\"><span class=\"RefGivenName\">He</span><span class=\"RefSurName\">YY</span></span>, <span class=\"RefAuthor\"><span class=\"RefSurName\">Yan</span><span class=\"RefGivenName\">Y</span></span>, <span class=\"RefAuthor\"><span class=\"RefSurName\">Zhang</span><span class=\"RefGivenName\">HF</span></span>, <span class=\"RefEtal\">et al</span>. <span class=\"RefArticleTitle\">Methyl salicylate 2-o-beta-d-lactoside alleviates the pathological progression of pristane-induced systemic lupus erythematosus-like disease in mice via suppression of inflammatory response and signal transduction [J]</span>. <span class=\"RefJournalTitle\">Drug design, development and therapy</span>, <span class=\"RefYear\">2016</span>,<span class=\"RefVolume\">10</span>(<span class=\"RefFPage\">3183</span>-<span class=\"RefLPage\">3196</span>.</p><p class=\"jrnlRefText\" class-name=\"RefText\" seqid=\"R4\" id=\"R4\" data-id=\"R4\" data-styled=\"RefText\" data-class-name=\"RefText\" data-reftype=\"Journal\"><span class=\"RefSlNo\">4</span>. <span class=\"RefAuthor\"><span class=\"RefSurName\">Gadakchi</span><span class=\"RefGivenName\">L</span></span>, <span class=\"RefAuthor\"><span class=\"RefSurName\">Hajialilo</span><span class=\"RefGivenName\">M</span></span>, <span class=\"RefAuthor\"><span class=\"RefSurName\">Nakhjavani</span><span class=\"RefGivenName\">MR</span></span>, <span class=\"RefEtal\">et al</span>. <span class=\"RefArticleTitle\">Efficacy and safety of mycophenolate mofetil versus intravenous pulse cyclophosphamide as induction therapy in proliferative lupus nephritis [J]</span>. <span class=\"RefJournalTitle\">Iranian journal of kidney diseases</span>, <span class=\"RefYear\">2018</span>,<span class=\"RefVolume\">12</span>(<span class=\"RefIssue\">5</span>):<span class=\"RefFPage\">288</span>-<span class=\"RefLPage\">292</span>.</p><p class=\"jrnlRefText\" class-name=\"RefText\" seqid=\"R5\" id=\"R5\" data-id=\"R5\" data-styled=\"RefText\" data-class-name=\"RefText\" data-reftype=\"Journal\"><span class=\"RefSlNo\">5</span>. <span class=\"RefAuthor\"><span class=\"RefSurName\">Jorge</span><span class=\"RefGivenName\">A</span></span>, <span class=\"RefAuthor\"><span class=\"RefSurName\">Wallace</span><span class=\"RefGivenName\">ZS</span></span>, <span class=\"RefAuthor\"><span class=\"RefSurName\">Zhang</span><span class=\"RefGivenName\">Y</span></span>, <span class=\"RefEtal\">et al</span>.<span class=\"RefArticleTitle\"> All-cause and cause-specific mortality trends of end-stage renal disease due to lupus nephritis from 1995 to 2014 [J]. Arthritis & rheumatology (Hoboken, NJ)</span>, <span class=\"RefYear\">2018</span>.</p><p class=\"jrnlRefText\" class-name=\"RefText\" seqid=\"R6\" id=\"R6\" data-id=\"R6\" data-styled=\"RefText\" data-class-name=\"RefText\" data-reftype=\"Journal\"><span class=\"RefSlNo\">6</span>. <span class=\"RefAuthor\"><span class=\"RefSurName\">Hahn</span><span class=\"RefGivenName\">BH</span></span>, <span class=\"RefAuthor\"><span class=\"RefSurName\">McMahon</span><span class=\"RefGivenName\">MA</span></span>, <span class=\"RefAuthor\"><span class=\"RefSurName\">Wilkinson</span><span class=\"RefGivenName\">A</span></span>, <span class=\"RefEtal\">et al</span>. <span class=\"RefArticleTitle\">American college of rheumatology guidelines for screening, treatment, and management of lupus nephritis [J]</span>. <span class=\"RefJournalTitle\">Arthritis care & research</span>, <span class=\"RefYear\">2012</span>,<span class=\"RefVolume\">64</span>(<span class=\"RefIssue\">6</span>):<span class=\"RefFPage\">797</span>-<span class=\"RefLPage\">808</span>.</p><p class=\"jrnlRefText\" class-name=\"RefText\" seqid=\"R7\" id=\"R7\" data-id=\"R7\" data-styled=\"RefText\" data-class-name=\"RefText\" data-reftype=\"Journal\"><span class=\"RefSlNo\">7</span>. <span class=\"RefAuthor\"><span class=\"RefSurName\">Park</span><span class=\"RefGivenName\">DJ</span></span>, <span class=\"RefAuthor\"><span class=\"RefSurName\">Choi</span><span class=\"RefGivenName\">SE</span></span>, <span class=\"RefAuthor\"><span class=\"RefSurName\">Xu</span><span class=\"RefGivenName\">H</span></span>, <span class=\"RefEtal\">et al</span>. <span class=\"RefArticleTitle\">Chronicity index, especially glomerular sclerosis, is the most powerful predictor of renal response following immunosuppressive treatment in patients with lupus nephritis [J]</span>. <span class=\"RefJournalTitle\">International journal of rheumatic diseases</span>, <span class=\"RefYear\">2018</span>,<span class=\"RefVolume\">21</span>(<span class=\"RefIssue\">2</span>):<span class=\"RefFPage\">458</span>-<span class=\"RefLPage\">467</span>.</p><p class=\"jrnlRefText\" class-name=\"RefText\" seqid=\"R8\" id=\"R8\" data-id=\"R8\" data-styled=\"RefText\" data-class-name=\"RefText\" data-reftype=\"Journal\"><span class=\"RefSlNo\">8</span>. <span class=\"RefAuthor\"><span class=\"RefSurName\">Huang</span><span class=\"RefGivenName\">W</span></span>, <span class=\"RefAuthor\"><span class=\"RefSurName\">Quach</span><span class=\"RefGivenName\">TD</span></span>, <span class=\"RefAuthor\"><span class=\"RefSurName\">Dascalu</span><span class=\"RefGivenName\">C</span></span>, <span class=\"RefEtal\">et al</span>. <span class=\"RefArticleTitle\">Belimumab promotes negative selection of activated autoreactive b cells in systemic lupus erythematosus patients [J]. JCI insight</span>, <span class=\"RefYear\">2018</span>,<span class=\"RefVolume\">3</span>(<span class=\"RefIssue\">17</span>).</p><p class=\"jrnlRefText\" class-name=\"RefText\" seqid=\"R9\" id=\"R9\" data-id=\"R9\" data-styled=\"RefText\" data-class-name=\"RefText\" data-reftype=\"Journal\"><span class=\"RefSlNo\">9</span>. <span class=\"RefAuthor\"><span class=\"RefSurName\">Schioppo</span><span class=\"RefGivenName\">T</span></span>, <span class=\"RefAuthor\"><span class=\"RefSurName\">Ingegnoli</span><span class=\"RefGivenName\">F</span></span>. <span class=\"RefArticleTitle\">Current perspective on rituximab in rheumatic diseases [J]</span>. <span class=\"RefJournalTitle\">Drug design, development and therapy</span>, <span class=\"RefYear\">2017</span>,<span class=\"RefVolume\">11</span>(<span class=\"RefFPage\">2891</span>-<span class=\"RefLPage\">2904</span>.</p>";
                }
                function setsamplerefinput() {
                    toastr.options = {
                        "closeButton": true,
                        "timeOut": "2000",

                    }
                    toastr.success('Sample input applied.', 'SUCCESS');
                    document.getElementById("refdata").value = "[{Frank, H. S. 1970. The Structure of Ordinary Water: New data and interpretations are yielding new insights into this fascinating substance. Science, 169(3946): 635641.},{Frank, H. S. 1970. The Structure of Ordinary Water: New data and interpretations are yielding new insights into this fascinating substance. Science, 169(3946): 635641.},{Frank, H. S. 1970. The Structure of Ordinary Water: New data and interpretations are yielding new insights into this fascinating substance. Science, 169(3946): 635641.},{Frank, H. S. 1970. The Structure of Ordinary Water: New data and interpretations are yielding new insights into this fascinating substance. Science, 169(3946): 635641.}]";
                }
                function openPmidBox() {
                    document.getElementById("htmldataFile").style.display = "none";
                    document.getElementById('pmidbox').style.display = "block";
                    document.getElementById('doibox').style.display = "none";
                    document.getElementById('htmlbox').style.display = "none";
                    document.getElementById('extractbox').style.display = "none";
                    document.getElementById('referencebox').style.display = "none";
                }
                function openDoiBox() {
                    document.getElementById("htmldataFile").style.display = "none";
                    document.getElementById("htmldataFiletext").style.display = "none";
                    document.getElementById('pmidbox').style.display = "none";
                    document.getElementById('doibox').style.display = "block";
                    document.getElementById('htmlbox').style.display = "none";
                    document.getElementById('extractbox').style.display = "none";
                    document.getElementById('referencebox').style.display = "none";
                }
                function openHtmlBox() {
                    if (document.getElementById("htmldataFile"))
                        document.getElementById("htmldataFile").style.display = "none";
                    document.getElementById("htmldataFiletext").style.display = "none";
                    document.getElementById('pmidbox').style.display = "none";
                    document.getElementById('doibox').style.display = "none";
                    document.getElementById('htmlbox').style.display = "block";
                    document.getElementById('extractbox').style.display = "none";
                    document.getElementById('referencebox').style.display = "none";
                }
                function openTBox() {
                    if (document.getElementById("htmldataFile"))
                        document.getElementById("htmldataFile").style.display = "none";

                    document.getElementById("htmldataFiletext").style.display = "none";
                    document.getElementById('pmidbox').style.display = "none";
                    document.getElementById('doibox').style.display = "none";
                    document.getElementById('htmlbox').style.display = "none";
                    document.getElementById('extractbox').style.display = "none";
                    document.getElementById('referencebox').style.display = "block";

                }
                function openEBox() {
                    if (document.getElementById("htmldataFile"))
                        document.getElementById("htmldataFile").style.display = "none";
                    document.getElementById('pmidbox').style.display = "none";
                    document.getElementById('doibox').style.display = "none";
                    document.getElementById('htmlbox').style.display = "none";
                    document.getElementById('extractbox').style.display = "block";
                    document.getElementById('referencebox').style.display = "none";
                }
                document.getElementById('htmlbox').style.display = "block";
                document.getElementById('dataatab').style.display = "none";
                document.getElementById('dataatabExtract').style.display = "none";
                var table = $('#user_data').DataTable({
                    "aaSorting": [[0, "desc"]],

                    "dom": 'Bfrtip',

                    "bProcessing": true,
                    "scrollX": true,
                    "ordering": false,
                    "font-size": "10px",
                    "autoWidth": false,
                    "columnDefs": [
                        { "width": "310px", "targets": 0 },
                        { "width": "320px", "targets": 1 },
                        { "width": "320px", "targets": 2 },
                        { "width": "320px", "targets": 3 },
                        { "width": "320px", "targets": 4 },
                        { "width": "320px", "targets": 5 },
                        { "width": "320px", "targets": 6 }
                    ]

                });
                var table2 = $('#user_data2').DataTable({
                    "aaSorting": [[0, "desc"]],

                    "dom": 'Bfrtip',
                    "ordering": false,
                    "bProcessing": true,
                    "scrollX": true,
                    "font-size": "10px"

                });
                function GenerateOutput(type, htmlmultipledata) {
                    document.getElementById("finalOutputDatas").innerHTML = " Processing... ";
                    var journalTypeInfo = "article-journal";
                    var style = document.getElementById("styleid").value;
                    var locale = document.getElementById("localeid").value;
                    var pre = document.getElementById("preid").value;
                    var post = document.getElementById("postid").value;
                    var data;
                    var biblioinputstring;
                    var endpoint;
                    document.getElementById('dataatab').style.display = "none";
                    document.getElementById('dataatabExtract').style.display = "none";
                    document.getElementById('dataatabpmidanddoi').style.display = "block";




                    //var apiUrl =document.getElementById("generatedapi").value ;

                    oopen();

                    if (type == 'extract') {
                        document.getElementById('dataatab').style.display = "none";
                        document.getElementById('dataatabExtract').style.display = "none";
                        document.getElementById('dataatabpmidanddoi').style.display = "block";
                        var final = document.getElementById("generatedapi").value;

                        var final = document.getElementById("generatedapi").value;
                        $('#myModal').modal('toggle');
                        table = $('#example').DataTable({
                            "ajax": {
                                "url": final,
                                "type": "POST",
                                'data': {
                                    "style": style,
                                    "locale": locale,
                                    "pre": pre,
                                    "post": post,
                                    "data": data,
                                    "type": type

                                },
                                "dataSrc": function (json) {

                                    alert(JSON.stringify(json.status.message));
                                    for (var i = 0; i < json.status.message.length; i++) {
                                        var x = json.status.message[i].value;

                                        json.status.message[i] = x;
                                    }

                                    alert(JSON.stringify(json.status.message));

                                    return json.status.message;
                                }
                            },
                            "dom": 'Bfrtip',
                            "ordering": false,
                            "buttons": [
                                'copy', 'csv', 'excel', 'pdf', 'print'
                            ],
                            "columns": [
                                {
                                    "className": 'details-control',
                                    "orderable": false,
                                    "data": null,
                                    "defaultContent": ''
                                },
                                { "data": "InputJSON" },
                                { "data": "BibliographyString" },
                                { "data": "Citation" },

                            ],
                            "columnDefs": [
                                { "width": "30px", "targets": 0 },
                                { "width": "60%", "targets": 1 },
                                { "width": "60%", "targets": 2 },
                                { "width": "60%", "targets": 3 },


                            ],
                            "order": [[1, 'asc']]
                        });
                    } else if (type == 'html') {

                        $('#myModal').modal('toggle');
                        document.getElementById('dataatab').style.display = "none";
                        document.getElementById('dataatabExtract').style.display = "none";
                        document.getElementById('dataatabpmidanddoi').style.display = "block";
                        toastr.options = {
                            "closeButton": false,
                            "timeOut": "500000",
                            "extendedTimeOut": "100000"
                        }
                        toastr.success('Processing, please wait..');
                        var dataval = document.getElementById("htmldata").value;
                        $.ajax({
                            url: '/api/mastermodule',
                            headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                            type: "POST",
                            data: { "data": dataval, "style": style, "type": "html", "locale": "locales-en-US.xml", "rateLimit": 20, "skipTrackChanges": 'true' },
                            success: function (val) {

                                console.log(JSON.stringify(val));
                                eextr = val;
                                toastr.clear();
                                document.getElementById("finalOutputDatas").innerHTML = "<div style=\"text-align:center\"> <font style\"text-align:center\" size=\"5px\" color=\"red\">     Validated and Formated</font></div> <br><br>";
                                if (eextr && eextr.message && eextr.message.Output && eextr.message.Output["ValidatedAndFormatted"].length > 0) {
                                    for (var i = 0; i < eextr.message.Output["ValidatedAndFormatted"].length; i++) {
                                        var xD = eextr.message.Output["ValidatedAndFormatted"][i];
                                        Object.keys(xD).map(function (s) {
                                            document.getElementById("finalOutputDatas").innerHTML += xD[s].BibliographyString;
                                        });
                                    }
                                } else {
                                    document.getElementById("finalOutputDatas").innerHTML += "<br> No reference set belong to validated and formatted section <br><br>";

                                }
                                document.getElementById("finalOutputDatas").innerHTML += "<br><div style=\"text-align:center\"> <font style\"text-align:center\" size=\"5px\" color=\"red\">  Non-Validated but Formated</font></div> <br><br>";

                                if (eextr && eextr.message && eextr.message.Output && eextr.message.Output["NonValidatedbutFormatted"].length > 0) {
                                    for (var i = 0; i < eextr.message.Output["NonValidatedbutFormatted"].length; i++) {
                                        var xD = eextr.message.Output["NonValidatedbutFormatted"][i];
                                        Object.keys(xD).map(function (s) {
                                            document.getElementById("finalOutputDatas").innerHTML += xD[s].BibliographyString;
                                        });
                                    }
                                } else {
                                    document.getElementById("finalOutputDatas").innerHTML += "<br> No reference set belong to Non validated but formatted section <br><br>";

                                }
                                document.getElementById("finalOutputDatas").innerHTML += "<br><div style=\"text-align:center\"> <font style\"text-align:center\" size=\"5px\" color=\"red\">  Failed Input</font></div> <br><br>";

                                if (eextr && eextr.message && eextr.message.FailedInputs.length > 0) {
                                    for (var i = 0; i < eextr.message.FailedInputs.length; i++) {
                                        var xD = eextr.message.FailedInputs[i];
                                        Object.keys(xD).map(function (s) {
                                            document.getElementById("finalOutputDatas").innerHTML += "<br><br>Reference  " + s + " failed. Reason : " + xD[s];
                                        });
                                    }
                                } else {
                                    document.getElementById("finalOutputDatas").innerHTML += "<br> No reference set belong to Failed Input section <br><br>";

                                }


                                toastr.success('Succesfully rendered the output.', 'SUCCESS', { timeOut: 3000 })
                            },
                            error: function (val) {
                                toastr.clear()
                                toastr.options = {};
                                document.getElementById("finalOutputDatas").innerHTML = "";
                                toastr.error('Failed to generate output. Something has gone wrong. Kindly check your net connection.', 'FAILED', { timeOut: 5000 })
                            }
                        });

                        table = $('#example').DataTable({
                            "ajax": final,
                            "dom": 'Bfrtip',
                            "ordering": false,
                            "buttons": [
                                'copy', 'csv', 'excel', 'pdf', 'print'
                            ],
                            "columns": [
                                {
                                    "className": 'details-control',
                                    "orderable": false,
                                    "data": null,
                                    "defaultContent": ''
                                },
                                { "data": "Input" },
                                { "data": "BibliographyStringUnstyled" },
                                { "data": "Citation" },

                            ],
                            "columnDefs": [
                                { "width": "30px", "targets": 0 },
                                { "width": "60%", "targets": 1 },
                                { "width": "60%", "targets": 2 },
                                { "width": "60%", "targets": 3 },


                            ],
                            "order": [[1, 'asc']]
                        });

                        $("#example tbody").unbind("click");
                        // Add event listener for opening and closing details
                        $('#example tbody').on('click', 'td.details-control', function () {

                            var tr = $(this).closest('tr');
                            var row = table.row(tr);

                            if (row.child.isShown()) {
                                // This row is already open - close it
                                row.child.hide();
                                tr.removeClass('shown');
                            }
                            else {
                                // Open this row
                                row.child(format(row.data())).show();
                                tr.addClass('shown');
                            }
                        });


                    }
                    else if (type == 'pmid' || type == 'doi') {


                        document.getElementById('dataatab').style.display = "none";
                        document.getElementById('dataatabExtract').style.display = "none";
                        document.getElementById('dataatabpmidanddoi').style.display = "block";


                        /* Formatting function for row details - modify as you need */
                        function format(d) {
                            var Pubmedarticlelink = "No Pubmed article exist";
                            var CrossrefArticleLink = "No Crossref article exist";
                            var pubmedjson = "Not found in pubmed";
                            var crossrefjson = "Skipped, since we found in pubmed";
                            var truecaser = "Slicing from the string error at html front end.";
                            var mergedJSON = "No merged JSON done";
                            if (d && d.MatchedJson && JSON.parse(d.MatchedJson)["Item-1"] && JSON.parse(d.MatchedJson)["Item-1"].title) {
                                var tempfinal = d.finalbiblio.toLowerCase();

                                var tempinput = JSON.parse(d.MatchedJson)["Item-1"].title.toLowerCase();
                                if (tempinput[tempinput.length - 1].match(/^[a-zA-Z0-9!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]*$/)) {
                                    tempinput = tempinput.slice(0, -1);
                                }

                                var i1 = tempfinal.indexOf(tempinput);
                                if (tempfinal)

                                    var ss = tempfinal.slice(i1, tempfinal.length);

                                var i2 = ss.indexOf("</span>");



                                truecaser = d.finalbiblio.slice(i1, (i2 + i1));

                            }

                            var inputsource;
                            if (d && d.InputConvertedJson && JSON.parse(d.InputConvertedJson) && JSON.parse(d.InputConvertedJson).PMID) {
                                inputsource = "Pubmed";
                                pubmedjson = d.MatchedJson;
                                mergedJSON = JSON.stringify(JSON.parse(d.MatchedJson)["Item-1"].author);


                            }
                            else if (d && d.InputConvertedJson && JSON.parse(d.InputConvertedJson) && JSON.parse(d.InputConvertedJson).DOI) {
                                inputsource = "Crossref";
                                crossrefjson = d.MatchedJson;
                                mergedJSON = JSON.parse(d.MatchedJson)["Item-1"];

                            }
                            else {
                                pubmedjson = "Not found in pubmed";
                                crossrefjson = "Not found in crossref"

                            }

                            if (d && d.MatchedJson && JSON.parse(d.MatchedJson)["Item-1"] && JSON.parse(d.MatchedJson)["Item-1"].DOI) {

                                CrossrefArticleLink = 'https://doi.org/' + JSON.parse(d.MatchedJson)["Item-1"].DOI;
                            }
                            if (d && d.MatchedJson && JSON.parse(d.MatchedJson)["Item-1"] && JSON.parse(d.MatchedJson)["Item-1"].PMID) {
                                Pubmedarticlelink = 'https://www.ncbi.nlm.nih.gov/pubmed/' + JSON.parse(d.MatchedJson)["Item-1"].PMID;

                            }

                            // `d` is the original data object for the row
                            return '<table cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;">' +
                                '<tr>' +
                                '<td>Input:</td>' +
                                '<td>' + d.Input + '</td>' +
                                '</tr>' +
                                '<tr>' +

                                '<td>Input data converted to json:</td>' +
                                '<td>' + JSON.stringify(d.InputConvertedJson1) + '</td>' +

                                '</tr>' +
                                '<td>Output from parseReference:</td>' +
                                '<td>' + d.parseref + ' </td>' +
                                '</tr>' +
                                '<tr>' +
                                '<tr>' +
                                '<tr>' +
                                '<td>PUBMED JSON:</td>' +
                                '<td>' + pubmedjson + '</td>' +
                                '</tr>' +
                                '</tr>' +
                                '<tr>' +
                                '<td>CROSSREF JSON:</td>' +
                                '<td>' + crossrefjson + '</td>' +
                                '</tr>' +
                                '<tr>' +
                                '<td>Merged JSON:</td>' +
                                '<td>' + mergedJSON + '</td>' +
                                '</tr>' +

                                '<td>Output from TrueCaser:</td>' +
                                '<td>' + truecaser + '</td>' +

                                '</tr>' +
                                '</tr>' +

                                '<td>Changed JSON:</td>' +
                                '<td>' + d.ChangedJSON + '</td>' +

                                '</tr>' +
                                '<tr>' +
                                '<td>Input to CiteProc system:</td>' +
                                '<td>' + d.MatchedJson + '</td>' +
                                '</tr>' +

                                '<tr>' +
                                '<td>Bibliography String from CiteProc system:</td>' +
                                '<td>' + d.BibliographyStringUnstyled + '</td>' +
                                '</tr>' +
                                '<tr>' +
                                '<td>Citation String from CiteProc system:</td>' +
                                '<td>' + d.Citation + '</td>' +
                                '</tr>' +
                                '<tr>' +
                                '<td>Final Generated Bibliography string:</td>' +
                                '<td>' + d.finalbiblio + '</td>' +
                                '</tr>' +

                                '<tr>' +
                                '<td>Crossref  link of the article:</td>' +
                                '<td>' + CrossrefArticleLink + '</td>' +
                                '</tr>' +

                                '<tr>' +
                                '<td>Pubmed  link of the article:</td>' +
                                '<td>' + Pubmedarticlelink + '</td>' +
                                '</tr>' +

                                '</table>';
                        } function format(d) {
                            var Pubmedarticlelink = "No Pubmed article exist";
                            var CrossrefArticleLink = "No Crossref article exist";
                            var pubmedjson = "Not found in pubmed";
                            var crossrefjson = "Skipped, since we found in pubmed";
                            var truecaser = "Slicing from the string error at html front end.";
                            var mergedJSON = "No merged JSON done";
                            if (d && d.MatchedJson && JSON.parse(d.MatchedJson)["Item-1"] && JSON.parse(d.MatchedJson)["Item-1"].title) {
                                var tempfinal = d.finalbiblio.toLowerCase();

                                var tempinput = JSON.parse(d.MatchedJson)["Item-1"].title.toLowerCase();
                                if (tempinput[tempinput.length - 1].match(/^[a-zA-Z0-9!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]*$/)) {
                                    tempinput = tempinput.slice(0, -1);
                                }

                                var i1 = tempfinal.indexOf(tempinput);
                                if (tempfinal)

                                    var ss = tempfinal.slice(i1, tempfinal.length);

                                var i2 = ss.indexOf("</span>");



                                truecaser = d.finalbiblio.slice(i1, (i2 + i1));

                            }

                            var inputsource;
                            if (d && d.InputConvertedJson && JSON.parse(d.InputConvertedJson) && JSON.parse(d.InputConvertedJson).PMID) {
                                inputsource = "Pubmed";
                                pubmedjson = d.MatchedJson;
                                mergedJSON = JSON.stringify(JSON.parse(d.MatchedJson)["Item-1"].author);


                            }
                            else if (d && d.InputConvertedJson && JSON.parse(d.InputConvertedJson) && JSON.parse(d.InputConvertedJson).DOI) {
                                inputsource = "Crossref";
                                crossrefjson = d.MatchedJson;
                                mergedJSON = JSON.parse(d.MatchedJson)["Item-1"];

                            }
                            else {
                                pubmedjson = "Not found in pubmed";
                                crossrefjson = "Not found in crossref"

                            }

                            if (d && d.MatchedJson && JSON.parse(d.MatchedJson)["Item-1"] && JSON.parse(d.MatchedJson)["Item-1"].DOI) {

                                CrossrefArticleLink = 'https://doi.org/' + JSON.parse(d.MatchedJson)["Item-1"].DOI;
                            }
                            if (d && d.MatchedJson && JSON.parse(d.MatchedJson)["Item-1"] && JSON.parse(d.MatchedJson)["Item-1"].PMID) {
                                Pubmedarticlelink = 'https://www.ncbi.nlm.nih.gov/pubmed/' + JSON.parse(d.MatchedJson)["Item-1"].PMID;

                            }

                            // `d` is the original data object for the row
                            return '<table cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;">' +
                                '<tr>' +
                                '<td>Input:</td>' +
                                '<td>' + d.Input + '</td>' +
                                '</tr>' +
                                '<tr>' +

                                '<td>Input data converted to json:</td>' +
                                '<td>' + JSON.stringify(d.InputConvertedJson) + '</td>' +

                                '</tr>' +
                                '<td>Output from parseReference:</td>' +
                                '<td>' + d.parseref + ' </td>' +
                                '</tr>' +
                                '<tr>' +
                                '<tr>' +
                                '<tr>' +
                                '<td>PUBMED JSON:</td>' +
                                '<td>' + pubmedjson + '</td>' +
                                '</tr>' +
                                '</tr>' +
                                '<tr>' +
                                '<td>CROSSREF JSON:</td>' +
                                '<td>' + crossrefjson + '</td>' +
                                '</tr>' +
                                '<tr>' +
                                '<td>Merged JSON:</td>' +
                                '<td>' + mergedJSON + '</td>' +
                                '</tr>' +

                                '<td>Output from TrueCaser:</td>' +
                                '<td>' + truecaser + '</td>' +

                                '</tr>' +
                                '</tr>' +

                                '<td>Changed JSON:</td>' +
                                '<td>' + d.ChangedJSON + '</td>' +

                                '</tr>' +
                                '<tr>' +
                                '<td>Input to CiteProc system:</td>' +
                                '<td>' + d.MatchedJson + '</td>' +
                                '</tr>' +

                                '<tr>' +
                                '<td>Bibliography String from CiteProc system:</td>' +
                                '<td>' + d.BibliographyStringUnstyled + '</td>' +
                                '</tr>' +
                                '<tr>' +
                                '<td>Citation String from CiteProc system:</td>' +
                                '<td>' + d.Citation + '</td>' +
                                '</tr>' +
                                '<tr>' +
                                '<td>Final Generated Bibliography string:</td>' +
                                '<td>' + d.finalbiblio + '</td>' +
                                '</tr>' +

                                '<tr>' +
                                '<td>Crossref  link of the article:</td>' +
                                '<td>' + CrossrefArticleLink + '</td>' +
                                '</tr>' +

                                '<tr>' +
                                '<td>Pubmed  link of the article:</td>' +
                                '<td>' + Pubmedarticlelink + '</td>' +
                                '</tr>' +

                                '</table>';
                        }
                        table.destroy();
                        var final = document.getElementById("generatedapi").value;
                        //alert(final);

                        table = $('#example').DataTable({

                            "ajax": {
                                "url": final,
                                "type": "POST",
                                'data': {
                                    "style": style,
                                    "locale": locale,
                                    "pre": pre,
                                    "post": post,
                                    "data": data,
                                    "type": type

                                },
                                "dataSrc": function (json) {


                                    return json.status.message.data;





                                }
                            },

                            "dom": 'Bfrtip',
                            "ordering": false,
                            "buttons": [
                                'copy', 'csv', 'excel', 'pdf', 'print'
                            ],
                            "columns": [
                                {
                                    "className": 'details-control',
                                    "orderable": false,
                                    "data": null,
                                    "defaultContent": ''
                                },
                                { "data": "Input" },
                                { "data": "BibliographyStringUnstyled" },
                                { "data": "Citation" },

                            ],
                            "columnDefs": [
                                { "width": "30px", "targets": 0 },
                                { "width": "60%", "targets": 1 },
                                { "width": "60%", "targets": 2 },
                                { "width": "60%", "targets": 3 },


                            ],
                            "order": [[1, 'asc']]
                        });
                        $('#myModal').modal('toggle');
                        $("#example tbody").unbind("click");
                        // Add event listener for opening and closing details
                        $('#example tbody').on('click', 'td.details-control', function () {

                            var tr = $(this).closest('tr');
                            var row = table.row(tr);

                            if (row.child.isShown()) {
                                // This row is already open - close it
                                row.child.hide();
                                tr.removeClass('shown');
                            }
                            else {
                                // Open this row
                                row.child(format(row.data())).show();
                                tr.addClass('shown');
                            }
                        });



                    }
                    else if (type = "reference") {
                        if (document.getElementById("FileMode").checked) {
                            document.getElementById("refdata").value = document.getElementById("htmldataFile").value;
                        }

                        $('#myModal').modal('toggle');
                        document.getElementById('dataatab').style.display = "none";
                        document.getElementById('dataatabExtract').style.display = "none";
                        document.getElementById('dataatabpmidanddoi').style.display = "block";
                        toastr.options = {
                            "closeButton": false,
                            "timeOut": "500000",
                            "extendedTimeOut": "100000"
                        }
                        toastr.success('Processing, please wait..');
                        var dataval = document.getElementById("refdata").value;
                        $.ajax({
                            url: '/api/mastermodule',
                            headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                            type: "POST",
                            data: { "data": dataval, "style": style, "type": "reference", "locale": "locales-en-US.xml", "rateLimit": 20, "skipTrackChanges": 'true' },
                            success: function (val) {


                                eextr = val;
                                console.log(val);
                                toastr.clear();
                                document.getElementById("finalOutputDatas").innerHTML = "<div style=\"text-align:center\"> <font style\"text-align:center\" size=\"5px\" color=\"red\">     Validated and Formated</font></div> <br><br>";
                                if (eextr && eextr.message && eextr.message.Output && eextr.message.Output["ValidatedAndFormatted"].length > 0) {
                                    for (var i = 0; i < eextr.message.Output["ValidatedAndFormatted"].length; i++) {
                                        var xD = eextr.message.Output["ValidatedAndFormatted"][i];
                                        Object.keys(xD).map(function (s) {
                                            document.getElementById("finalOutputDatas").innerHTML += xD[s].BibliographyString;
                                        });
                                    }
                                } else {
                                    document.getElementById("finalOutputDatas").innerHTML += "<br> No reference set belong to validated and formatted section <br><br>";

                                }
                                document.getElementById("finalOutputDatas").innerHTML += "<br><div style=\"text-align:center\"> <font style\"text-align:center\" size=\"5px\" color=\"red\">  Non-Validated but Formated</font></div> <br><br>";

                                if (eextr && eextr.message && eextr.message.Output && eextr.message.Output["NonValidatedbutFormatted"].length > 0) {
                                    for (var i = 0; i < eextr.message.Output["NonValidatedbutFormatted"].length; i++) {
                                        var xD = eextr.message.Output["NonValidatedbutFormatted"][i];
                                        Object.keys(xD).map(function (s) {
                                            document.getElementById("finalOutputDatas").innerHTML += xD[s].BibliographyString;
                                        });
                                    }
                                } else {
                                    document.getElementById("finalOutputDatas").innerHTML += "<br> No reference set belong to Non validated but formatted section <br><br>";

                                }
                                document.getElementById("finalOutputDatas").innerHTML += "<br><div style=\"text-align:center\"> <font style\"text-align:center\" size=\"5px\" color=\"red\">  Failed Input</font></div> <br><br>";

                                if (eextr && eextr.message && eextr.message.FailedInputs.length > 0) {
                                    for (var i = 0; i < eextr.message.FailedInputs.length; i++) {
                                        var xD = eextr.message.FailedInputs[i];
                                        Object.keys(xD).map(function (s) {
                                            document.getElementById("finalOutputDatas").innerHTML += "<br><br>Reference  " + s + " failed. Reason : " + xD[s];
                                        });
                                    }
                                } else {
                                    document.getElementById("finalOutputDatas").innerHTML += "<br> No reference set belong to Failed Input section <br><br>";

                                }


                                toastr.success('Succesfully rendered the output.', 'SUCCESS', { timeOut: 3000 })
                            },
                            error: function (val) {
                                toastr.clear()
                                toastr.options = {};
                                document.getElementById("finalOutputDatas").innerHTML = "";
                                toastr.error('Failed to generate output. Something has gone wrong. Kindly check your net connection.', 'FAILED', { timeOut: 5000 })
                            }
                        });

                        table = $('#example').DataTable({
                            "ajax": final,
                            "dom": 'Bfrtip',
                            "ordering": false,
                            "buttons": [
                                'copy', 'csv', 'excel', 'pdf', 'print'
                            ],
                            "columns": [
                                {
                                    "className": 'details-control',
                                    "orderable": false,
                                    "data": null,
                                    "defaultContent": ''
                                },
                                { "data": "Input" },
                                { "data": "BibliographyStringUnstyled" },
                                { "data": "Citation" },

                            ],
                            "columnDefs": [
                                { "width": "30px", "targets": 0 },
                                { "width": "60%", "targets": 1 },
                                { "width": "60%", "targets": 2 },
                                { "width": "60%", "targets": 3 },


                            ],
                            "order": [[1, 'asc']]
                        });

                        $("#example tbody").unbind("click");
                        // Add event listener for opening and closing details
                        $('#example tbody').on('click', 'td.details-control', function () {

                            var tr = $(this).closest('tr');
                            var row = table.row(tr);

                            if (row.child.isShown()) {
                                // This row is already open - close it
                                row.child.hide();
                                tr.removeClass('shown');
                            }
                            else {
                                // Open this row
                                row.child(format(row.data())).show();
                                tr.addClass('shown');
                            }
                        });

                    }
                    return false;
                }



                /*
                document.getElementById('filespmid').onchange = function () {
                          var style= document.getElementById("styleid").value;
                var locale= document.getElementById("localeid").value;
                var pre= document.getElementById("preid").value;
                var post= document.getElementById("postid").value;
                
                var endpoint;
                
                document.getElementById('dataatab').style.display="block";
                   document.getElementById('dataatabExtract').style.display="none";
                            var file = this.files[0];
                            var reader = new FileReader();
                            reader.onload = function (progressEvent) {
                                // Entire file
                 // By lines
                                var lines = this.result.split('\n');
                                for (var line = 0; line < lines.length; line++) {
                
                  lines[line]=lines[line].replace("&", "and");
                
                
                                    line++;
                                }
                
                endpoint= document.getElementById("pmidep").value;
                document.getElementById("generatedapi").value=endpoint+"search?type=pmid"+"&style="+style+"&locale="+locale+"&pre="+pre+"&post="+post;
                
                var apiUrl=document.getElementById("generatedapi").value;
                var data=lines;
                table.clear();
                oopen();
                 var requests = [];
                  var biblioinputstring = [];
                $.when($, requests).done(function() {
                
                    for (i = 0; i < data.length; ++i) {
                
                        requests.push($.ajax({
                            url: apiUrl + "&data="+data[i],
                        }));
                       biblioinputstring.push(data[i+1]);
                        ++i;
                    }
                
                    $.when.apply($, requests).done(function() {
                        $('#myModal').modal('toggle');
                
                for(var i=0;i<requests.length;i++)
                {
                
                requests[i].responseText=JSON.parse(requests[i].responseText);
                
                if(requests[i].responseText && requests[i].responseText.status && (requests[i].responseText.status.code==500  || requests[i].responseText.status.code==400 ))
                {
                
                dataSet = ['<font color="red">'+biblioinputstring[i]+'</font>',"", "", JSON.stringify(requests[i].responseText), "","",""];
                                        table.rows.add([dataSet]).draw();
                }
                else
                {
                
                  document.getElementById('output').value = "successfully fetched the data.";
                
                                        dataSet = [biblioinputstring[i],requests[i].responseText.BibliographyString,requests[i].responseText.Citation,requests[i].responseText.Input, requests[i].responseText.InputConvertedJson, requests[i].responseText.MatchedJson, requests[i].responseText.ObtainedDataSource];
                table.rows.add([dataSet]).draw();
                }
                
                }
                
                    }).fail(function() {
                      $('#myModal').modal('toggle');
                      document.getElementById('output').value = "Failed to fetch data. Something went wrong.";
                    });;
                });
                
                
                
                
                
                            };
                            reader.readAsText(file);
                        };
                
                
                
                
                        document.getElementById('filesdoi').onchange = function () {
                          var style= document.getElementById("styleid").value;
                var locale= document.getElementById("localeid").value;
                var pre= document.getElementById("preid").value;
                var post= document.getElementById("postid").value;
                
                var endpoint;
                
                document.getElementById('dataatab').style.display="block";
                   document.getElementById('dataatabExtract').style.display="none";
                            var file = this.files[0];
                            var reader = new FileReader();
                            reader.onload = function (progressEvent) {
                                // Entire file
                 // By lines
                                var lines = this.result.split('\n');
                                for (var line = 0; line < lines.length; line++) {
                
                  lines[line]=lines[line].replace("&", "and");
                
                
                                    line++;
                                }
                endpoint= document.getElementById("doiep").value;
                document.getElementById("generatedapi").value=endpoint+"search?type=doi"+"&style="+style+"&locale="+locale+"&pre="+pre+"&post="+post;
                
                var apiUrl=document.getElementById("generatedapi").value;
                var data=lines;
                table.clear();
                oopen();
                 var requests = [];
                  var biblioinputstring = [];
                $.when().done(function() {
                
                    for (i = 0; i < data.length; ++i) {
                
                        requests.push($.ajax({
                            url: apiUrl + "&data="+data[i],
                        }));
                       biblioinputstring.push(data[i+1]);
                        ++i;
                    }
                    $.when.apply($, requests).done(function() {
                        $('#myModal').modal('toggle');
                for(var i=0;i<requests.length;i++)
                {
                
                requests[i].responseText=JSON.parse(requests[i].responseText);
                
                if(requests[i].responseText && requests[i].responseText.status && (requests[i].responseText.status.code==500  || requests[i].responseText.status.code==400 ))
                {
                
                dataSet = ['<font color="red">'+biblioinputstring[i]+'</font>',"", "", JSON.stringify(requests[i].responseText), "","",""];
                                        table.rows.add([dataSet]).draw();
                
                
                
                }
                else
                {
                
                  document.getElementById('output').value = "successfully fetched the data.";
                
                        dataSet = [biblioinputstring[i],requests[i].responseText.BibliographyString,requests[i].responseText.Citation,requests[i].responseText.Input, requests[i].responseText.InputConvertedJson, requests[i].responseText.MatchedJson, requests[i].responseText.ObtainedDataSource];
                                        table.rows.add([dataSet]).draw();
                      }
                
                
                
                
                }
                
                    }).fail(function() {
                      $('#myModal').modal('toggle');
                
                      document.getElementById('output').value = "Failed to fetch data. Something went wrong.";
                    });;
                });
                
                
                
                
                
                            };
                            reader.readAsText(file);
                        };
                */




                function oopen() {
                    $('#myModal').modal({
                        backdrop: 'static',
                        keyboard: false
                    })

                }
                oopen();
                var eextr = [];
                $.ajax({
                    type: "POST",

                    url: 'api/extractstyles',
                    success: function (response) {
                        $('#myModal').modal('toggle');
                        //Although response is an object, the field contents is a string and needs to be parsed here.
                        var data = response.status.message;

                        var catOptions = '';
                        for (var i = 0; i < data.length; i++) {
                            var a = [];
                            var sttr = data[i];
                            a = sttr.split('|');
                            catOptions += "<option value=" + a[1] + ">" + a[0] + "</option>";
                        }
                        document.getElementById("styleid").innerHTML = catOptions;

                    },
                    error: function (request) {
                        $('#myModal').modal('toggle');
                        alert("Unable to extract style list. Service doesn't seem to work fine.");
                    }
                });




            </script>

</body>

</html>